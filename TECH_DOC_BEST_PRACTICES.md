# 技术文档写作最佳实践

## 总览（共享基线）
- 先结论，后理由；层次不超过三层。
- 先直觉与 Big Picture，再细化定义与细节。
- 准确第一：不脑补、不扩展原始事实；术语一致且可追溯。
- 保留原始信息与权威引用，便于事实核查；本指南为“指导性”，按场景裁剪即可。
- 避免歧义与模板腔：短句、主动语态；数值配单位；错别字先确认再更正。
- 通用 Markdown：内联代码标注标识符/命令/键名/路径；标题≤3–4 级；列表承载步骤/要点；对比用表格或并列小节；锚点/链接清晰。

## 类型指南

### 介绍/解释类（非速查/SOP）
- 目标：建立理解与判断；让读者先知道“是什么/为什么/能带来什么”。
 - 结构（金字塔）：
  - 开篇总领段（单段落，≤3–5 句）：一句话结论应覆盖 What/Why/Outcome；同段交代背景/现状与本文目的，并明确面向的读者群体与预期知识背景；必要时简写核心思路/技术/方向，避免与结论重复。
    示例（自然语言，单段落）：
    > 高峰期结账链路因跨库事务导致回滚与延迟，错误率上升且审计困难。本文旨在帮助快速判断事件溯源是否能在现有约束下落地，并明确需要进一步确认的关键假设。我们倾向先在只读侧试点，引入读写分离以评估审计收益与一致性延迟，再决定是否推广到写路径。本文面向新入职的后端工程师，默认掌握基础 HTTP/SQL，并了解系统的大致架构。
  - 2–5 个支撑要点：每条先结论，再理由与证据。
  - 展开细节：流程、边界、权衡、反例。
- 引入新概念：
  - 先直观小例子 + 整体图景。
  - 再正式定义、术语、典型场景与边界。
  - 补充易混点与不适用情形。

### 速查/SOP（强调检索与一键复制）
- 目标：最短路径找到“可直接执行”的步骤或命令。
- 开篇导语 + 元信息：先用 1 句自然语言说明“任务与预期输出”，紧随 1–3 行项目符号交代“适用范围/前置条件/风险或权限”，随后立即进入“最短可用示例”。
  示例骨架：
  该流程用于在正式下线前确认目标 Ceph 集群无外部访问与未知依赖，确保用户不受影响。
  - 适用范围：RGW 暴露的对象存储集群（systemd 或 cephadm 部署）
  - 前置条件：可读取日志、具备 sudo 权限与基本 Shell 能力
  - 风险与注意：操作为只读；建议观察窗口≥8 小时
- 信息架构：索引页 → 分类页（CLI/API/配置/排错） → 卡片（单任务/单命令）。
- 卡片模板（固定顺序）：
  1) 名称 + 一句话意图（含常见别名）
  2) 最短可用示例（优先展示）
  3) 常用参数/变体（常用优先）
  4) 常见错误与快速修复
  5) 相关/深入阅读
- 信息边界（SOP 特化）：
  - 不新增原文外的信息：不自拟额外步骤、参数、标志位、风险、适用范围或平台差异；无依据的“最佳实践”一律不添加。
  - 必要补充需明确标注“待确认/建议补充”并写明依据或来源。
  - 仅做表述与排版改进：可将原有命令整理为围栏代码块、统一变量/占位符格式，但不得改变语义或默认行为。
  - 示例输出与提示需标注为“示例”，不得冒充真实生产结果。
  - 原句与术语尽量保留；如需修正错别字/单位，先与作者确认，并在变更记录中说明。
- 代码块规范（便于一键复制）：
  - 围栏代码块标注 `bash`/`sh`；一步一块；不含提示符 `$`/`#`。
  - 需要权限显式 `sudo` 或说明在 root 环境执行。
  - 命令可直接执行：无智能引号、无省略号、无多余换行；长命令优先单行，续行用反斜杠并避免尾随空格。
  - 变量集中定义；占位符用 `<PROJECT_ID>` 并配注释或默认值。
  - 安全默认：先给 `--dry-run`/预览版，再给真实执行版；尽量提供非交互等价写法（如 `-y`），并说明影响。
  - 平台差异明确分块（Linux/macOS/容器内）。
- 示例（良好）
  ```bash
  # 定义上下文（读者只需改一处）
  NS="payments"          # 替换为目标命名空间
  APP="checkout-api"     # 替换为应用名

  # 预览将被删除的资源（推荐先执行）
  kubectl delete pod -n "$NS" -l app="$APP" --dry-run=client -o name
  # 确认后再执行真实删除
  kubectl delete pod -n "$NS" -l app="$APP"
  ```
- 检索友好：标题含主关键词与别名；稳定锚点；相邻操作互链；分类页给“快速路径”。

## 共通规范

- 信息边界与核对：
  - 不新增原文未提供的事实或结论；需补充时标注“待确认/建议补充”。
  - 保留原始表述/数值/假设；删改需说明原因与依据。
  - 对关键定义、数据、API/协议/算法引用权威来源（标准、官方文档、论文、RFC、源码/提交记录）。
  - 引用写法：给出链接、版本/提交号、章节/页码与访问日期；多来源不一致时列差异与采信理由；集中列“参考资料/引用”。
  - 代码/命令只做格式与注释优化，不改语义与逻辑；图表仅改呈现，不引入新数据或推断性结论。
  - 错别字与更正：发现拼写/术语/数据疑似错误，先与作者确认后再更正；避免静默修改，并在变更记录中保留原句与说明。

- 语言与风格：
  - 短句、主动语态；一段一个核心意思；避免“非常/极大/最佳”等空洞强化。
  - 术语首次定义或中英对照，后文统一使用。
  - 避免多义指代（它/这个/前者/后者），数值与单位成对出现。

- 排版与可读性：
  - 标题 ≤ 3–4 级；长段落拆成列表或小节；对比与权衡用表格或并列小节。
  - 明确读者画像、前置知识与“不在范围内”的内容；链接与锚点清晰；图片需替代文本。
 
- Markdown 语法要点：
  - 内联代码：用反引号标注标识符、命令、键名、环境变量与文件路径；标点放在反引号之外；避免在内联中放提示符字符。
  - 代码块：使用围栏代码块并标注语言（如 `bash`/`sh`/`json`/`yaml`/`sql`/`http`/`text`）；仅保留最小可读片段；需要输出时标注“示例输出”。
  - 命令片段：默认不含 `$`/`#` 提示符；必要权限用 `sudo` 或说明在 root 环境执行；避免智能引号与省略号。
  - 配置与数据：按原生语法给出（JSON 不加注释，需说明时改用 `jsonc` 或在上下文解释）；长行适度换行并说明续行方式。
  - 列表：步骤与要点用有序/无序列表；层级不超过两层；一条只表达一个意思。
  - 表格：用于参数/对比；建议列顺序 `Name | Type/Values | Default | Required | Example | Note`，并给出一句话结论。
  - 引用与提示：用 `>` 标注定义/注意/限制，避免过度使用；若文档系统支持提示块，可映射到 Note/Warning 等。
  - 链接与锚点：链接文本可读且含关键词；锚点稳定；外链尽量给版本/提交号与访问日期；图片提供替代文本。
